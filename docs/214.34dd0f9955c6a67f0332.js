"use strict";(self.webpackChunkenspect=self.webpackChunkenspect||[]).push([[214],{7214:(I,c,o)=>{o.r(c),o.d(c,{UsagesModule:()=>_});var g=o(8583),u=o(3256),l=o(5319),x=o(136),m=o(9522),p=o(3557),e=o(8720),C=o(9030),h=o(9598),d=o(8239),f=o(8629);const v=["buttonUsage"];let O=(()=>{class a extends m.p{constructor(t){super(),this.dataState=t,this.timeperiods={introActive:2,introInactive:3,finishTimeUsageActive:3,finishTimeUsageInactive:2.5,usageActive:1,usageInactive:.5},this.initDelay=0,this.subs=new l.w,this.animationInProgress=!0,this.isIntro=!0}ngOnInit(){this.usage="usageSwitch_"+this.usageIndex,this.options=this.createOptions(p.W[this.usage],!0),super.ngOnInit(),this.setSubscriptionSelectedRegions(),this.animationInProgress=!1}setSubscriptionSelectedRegions(){this.subscriptionSelectedUsage=this.dataState.selectedUsage$.subscribe(t=>{this.isSelected=t[this.usage],this.handleUsageChange(this.isIntro),this.selectedUsage=t})}handleUsageChange(t){var n=this;return(0,d.Z)(function*(){let[s,r]=[];t?([s,r]=n.isSelected?[1e3*n.timeperiods.introActive,n.timeperiods.finishTimeUsageActive]:[1e3*n.timeperiods.introInactive,n.timeperiods.finishTimeUsageInactive],n.isIntro=!1):[s,r]=n.isSelected?[1e3*n.timeperiods.usageActive,n.timeperiods.finishTimeUsageActive]:[1e3*n.timeperiods.usageInactive,n.timeperiods.finishTimeUsageInactive],yield n.playAnimation(s,n.initDelay),n.currentTime=r})()}onClick(){var t=this;return(0,d.Z)(function*(){if(!t.animationInProgress){t.animationInProgress=!0;let[n,s]=t.isSelected?[1e3*t.timeperiods.usageActive,t.timeperiods.finishTimeUsageInactive]:[1e3*t.timeperiods.usageInactive,t.timeperiods.finishTimeUsageActive];yield t.playAnimation(n),t.currentTime=s;let r=Object.keys(t.selectedUsage).reduce((y,T)=>Object.assign(Object.assign({},y),{[T]:!1}),{});return r[t.usage]=!t.selectedUsage[t.usage],t.dataState.setUsage(r),t.animationInProgress=!1,Promise.resolve()}})()}playAnimation(t,n=0){var s=this;return(0,d.Z)(function*(){yield(0,f.Vs)(n),s.play(),yield(0,f.Vs)(t),s.pause()})()}loadedMetaData(){this.duration=this.player.duration()}ngOnDestroy(){this.subs.unsubscribe()}}return a.\u0275fac=function(t){return new(t||a)(e.Y36(h.W))},a.\u0275cmp=e.Xpm({type:a,selectors:[["button-usage"]],viewQuery:function(t,n){if(1&t&&e.Gf(v,7),2&t){let s;e.iGM(s=e.CRH())&&(n.videoElement=s.first)}},inputs:{usageIndex:"usageIndex"},features:[e.qOj],decls:3,vars:0,consts:[[1,"usages-button"],["muted","",3,"click","loadedmetadata"],["buttonUsage",""]],template:function(t,n){1&t&&(e.TgZ(0,"div",0),e.TgZ(1,"video",1,2),e.NdJ("click",function(){return n.onClick()})("loadedmetadata",function(){return n.loadedMetaData()}),e.qZA(),e.qZA())},encapsulation:2}),a})();const M=["usageBackground"];function P(a,i){if(1&a&&(e.TgZ(0,"div"),e.TgZ(1,"div"),e._UZ(2,"button-usage",5),e.qZA(),e.qZA()),2&a){const t=i.$implicit,n=i.index;e.xp6(1),e.Gre("button-container-left-",n,""),e.xp6(1),e.Q6J("usageIndex",t)}}function b(a,i){if(1&a&&(e.TgZ(0,"div"),e.TgZ(1,"div"),e._UZ(2,"button-usage",5),e.qZA(),e.qZA()),2&a){const t=i.$implicit,n=i.index;e.xp6(1),e.Gre("button-right-",n,""),e.xp6(1),e.Q6J("usageIndex",t)}}const w=[{path:"",component:(()=>{class a extends m.p{constructor(t,n){super(),this.fetchService=t,this.dataState=n,this.options=this.createOptions(p.W.usagesBackground,!0),this.timesteps={loopStart:2.55,loopEnd:5.1},this.subs=new l.w,this.rightButtonNrs=[4,5,6,7],this.leftButtonNrs=[0,1,2,3]}ngOnInit(){super.ngOnInit(),this.setSubscriptionSelectedBalance(),this.subs.add(this.subscriptionSelectedBalance)}setSubscriptionSelectedBalance(){this.subscriptionSelectedBalance=this.dataState.selectedBalance$.subscribe(t=>{"Nutzenergieanalyse"===t&&this.fetchAndSetOptionData(t)})}fetchAndSetOptionData(t){let s=x.l_[t].concat("_usages");this.fetchService.queryBalanceIndex(s).subscribe(r=>{this.usages=JSON.parse(r.balanceIndex[0].data)})}loadedMetaData(){this.duration=this.player.duration()}timeUpdate(){this.currentTime>=this.timesteps.loopEnd&&(this.currentTime=this.timesteps.loopStart,this.play())}onDestroy(){this.subs.unsubscribe()}}return a.\u0275fac=function(t){return new(t||a)(e.Y36(C.l),e.Y36(h.W))},a.\u0275cmp=e.Xpm({type:a,selectors:[["app-usages"]],viewQuery:function(t,n){if(1&t&&e.Gf(M,7),2&t){let s;e.iGM(s=e.CRH())&&(n.videoElement=s.first)}},features:[e.qOj],decls:6,vars:2,consts:[[1,"usages"],[4,"ngFor","ngForOf"],[1,"cosmic-key"],["muted","",3,"timeupdate","loadedmetadata"],["usageBackground",""],[3,"usageIndex"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0),e.YNc(1,P,3,4,"div",1),e.YNc(2,b,3,4,"div",1),e.TgZ(3,"div",2),e.TgZ(4,"video",3,4),e.NdJ("timeupdate",function(){return n.timeUpdate()})("loadedmetadata",function(){return n.loadedMetaData()}),e.qZA(),e.qZA(),e.qZA()),2&t&&(e.xp6(1),e.Q6J("ngForOf",n.leftButtonNrs),e.xp6(1),e.Q6J("ngForOf",n.rightButtonNrs))},directives:[g.sg,O],styles:[".usages[_ngcontent-%COMP%]{display:grid;grid-template-columns:auto;grid-template-rows:repeat(4,120px);grid-auto-flow:column;grid-row-gap:8%;grid-column-gap:5%;justify-items:center}@media (max-width: 568px) and (orientation: landscape){.usages[_ngcontent-%COMP%]{transform:scale(.27) translate(-148%,-124%)}}@media (min-width: 569px) and (max-width: 667px) and (orientation: landscape){.usages[_ngcontent-%COMP%]{transform:scale(.3) translate(-125%,-104%)}}@media (min-width: 668px) and (max-width: 736px) and (orientation: landscape){.usages[_ngcontent-%COMP%]{transform:scale(.35) translate(-100%,-84%)}}@media (min-width: 737px) and (max-width: 740px) and (orientation: landscape){.usages[_ngcontent-%COMP%]{transform:scale(.33) translate(-102%,-98%)}}@media (min-width: 741px) and (max-width: 812px) and (orientation: landscape){.usages[_ngcontent-%COMP%]{transform:scale(.35) translate(-88%,-90%)}}@media (min-width: 813px) and (max-width: 844px) and (orientation: landscape){.usages[_ngcontent-%COMP%]{transform:scale(.37) translate(-84%,-82%)}}@media (min-width: 845px) and (max-width: 848px) and (orientation: landscape){.usages[_ngcontent-%COMP%]{transform:scale(.4) translate(-84%,-72%)}}@media (min-width: 849px) and (max-width: 854px) and (orientation: landscape){.usages[_ngcontent-%COMP%]{transform:scale(.4) translate(-82%,-66%)}}@media (min-width: 855px) and (max-width: 897px) and (orientation: landscape){.usages[_ngcontent-%COMP%]{transform:scale(.4) translate(-74%,-72%)}}@media (min-width: 898px) and (max-width: 927px) and (orientation: landscape){.usages[_ngcontent-%COMP%]{transform:scale(.42) translate(-72%,-68%)}}@media (min-width: 928px) and (max-width: 960px) and (orientation: landscape){.usages[_ngcontent-%COMP%]{transform:scale(.43) translate(-67%,-58%)}}@media (min-width: 961px) and (max-width: 1024px) and (orientation: landscape){.usages[_ngcontent-%COMP%]{transform:scale(.45) translate(-69%,-58%)}}@media (min-width: 1025px) and (max-width: 1281px) and (orientation: landscape){.usages[_ngcontent-%COMP%]{transform:scale(.56) translate(-45%,-41%)}}@media (min-width: 1282px) and (max-width: 1367px) and (orientation: landscape){.usages[_ngcontent-%COMP%]{transform:scale(.52) translate(75%,219%)}}@media (min-width: 1368px) and (max-width: 1600px) and (orientation: landscape){.usages[_ngcontent-%COMP%]{transform:scale(.53) translate(-45%,-37%)}}@media (min-width: 1601px){.usages[_ngcontent-%COMP%]{transform:scale(.72) translate(-23%,-11%)}}.usages[_ngcontent-%COMP%]   .cosmic-key[_ngcontent-%COMP%]{grid-row-start:1;grid-row-end:5;grid-column-start:2;grid-column-end:3;border:1px solid #fff;border-radius:14px}.usages[_ngcontent-%COMP%]   .cosmic-key[_ngcontent-%COMP%]   video[_ngcontent-%COMP%]{transform:translateY(11%) scaleX(1.3)}.usages[_ngcontent-%COMP%]   .button-container-left-0[_ngcontent-%COMP%]{grid-row:.25;grid-column-start:1;grid-column-end:2;z-index:0}.usages[_ngcontent-%COMP%]   .button-container-right-0[_ngcontent-%COMP%]{grid-row:.25;grid-column-start:2;grid-column-end:3;z-index:0}.usages[_ngcontent-%COMP%]   .button-container-left-1[_ngcontent-%COMP%]{grid-row:.5;grid-column-start:1;grid-column-end:2;z-index:0}.usages[_ngcontent-%COMP%]   .button-container-right-1[_ngcontent-%COMP%]{grid-row:.5;grid-column-start:2;grid-column-end:3;z-index:0}.usages[_ngcontent-%COMP%]   .button-container-left-2[_ngcontent-%COMP%]{grid-row:.75;grid-column-start:1;grid-column-end:2;z-index:0}.usages[_ngcontent-%COMP%]   .button-container-right-2[_ngcontent-%COMP%]{grid-row:.75;grid-column-start:2;grid-column-end:3;z-index:0}.usages[_ngcontent-%COMP%]   .button-container-left-3[_ngcontent-%COMP%]{grid-row:1;grid-column-start:1;grid-column-end:2;z-index:0}.usages[_ngcontent-%COMP%]   .button-container-right-3[_ngcontent-%COMP%]{grid-row:1;grid-column-start:2;grid-column-end:3;z-index:0}.usages[_ngcontent-%COMP%]   .button-container-left-4[_ngcontent-%COMP%]{grid-row:1.25;grid-column-start:1;grid-column-end:2;z-index:0}.usages[_ngcontent-%COMP%]   .button-container-right-4[_ngcontent-%COMP%]{grid-row:1.25;grid-column-start:2;grid-column-end:3;z-index:0}"]}),a})()}];let U=(()=>{class a{}return a.\u0275fac=function(t){return new(t||a)},a.\u0275mod=e.oAB({type:a}),a.\u0275inj=e.cJS({imports:[[u.Bz.forChild(w)],u.Bz]}),a})(),_=(()=>{class a{}return a.\u0275fac=function(t){return new(t||a)},a.\u0275mod=e.oAB({type:a}),a.\u0275inj=e.cJS({imports:[[g.ez,U]]}),a})()}}]);